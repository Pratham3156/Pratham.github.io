<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ChillBox</title>
<link rel="icon" type="image/png" href="logo.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  background: #0a0f19;
  color: #fff;
}

/* NAVBAR */
.navbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 40px;
  background: linear-gradient(to bottom, #000, #0a0f19);
}
header{
  position: sticky;
  top: 0px;
  z-index: 10;
  align-items: center;
  justify-content: space-between;
  backdrop-filter: blur(4px);
}

.logo { font-size: 26px; font-weight: 700; color: white; text-decoration: none; gap: 8px; margin-top: 10px;}
i { color: #1db954;}
a{ text-decoration: none; color: white; 
  font-size: 0.95em;
  font-weight: 500;
}

.nav-links {
  list-style: none;
  display: flex;
  gap: 30px;
  margin-left: 200px;
}

a { cursor: pointer; opacity: 0.8;
  transition: 0.3s; 
   margin-top: 10px;
  font-size: 17px;}
.nav-links a {
  padding: 5px;
}
.nav-links .active {
  background: #1db954;
  color: black;
  /*padding: 8px 18px;*/
  border-radius: 8px;
  font-weight: 600;
  padding: 5px;
}
.nav-links a:hover {
  opacity: 1;
  background-color: #1db954;
  border-radius: 8px;
  color: black;
}

#search {
  background: #111;
  border: none;
  color: white;
  padding: 10px 16px;
  border-radius: 10px;
  border: 1px solid white;
  margin-left: 300px;
}
  #searchInput:focus {
  width: 250px;
}

/* SECTIONS */
section {
  padding: 20px 40px;
  overflow:
}

.hidden { display: none; }
h2 { margin-bottom: 12px; }

/* SLIDER */
.slider {
  position: relative;
}

.games-row {
  display: flex;
  gap: 16px;
  overflow-x: hidden;
  scroll-behavior: smooth;
  padding-bottom: 10px;
}

/* ARROWS */
.arrow {
  position: absolute;
  top: 40%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.7);
  border: none;
  color: white;
  font-size: 28px;
  padding: 6px 12px;
  cursor: pointer;
  border-radius: 50%;
  z-index: 5;
  filter: blur(1px);
}

.arrow.left { left: -10px; }
.arrow.right { right: -10px; }

.arrow:hover {
  background: #1db954;
  color: black;
  box-shadow: 0 0 20px white; 
}

/* GRID */
.games-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
  padding: 20px 40px;
}

/* CARD */
.game-card {
  min-width: 200px;
  background: #151b2c;
  border-radius: 16px;
  overflow: hidden;
  transition: 0.3s;
  cursor: pointer;
}

.game-card:hover {
  transform: translateY(-6px) scale(1.04);
  box-shadow: 0 0 20px white; /*rgba(45,255,45,0.2);*/
}

.game-card img {
  width: 100%;
  height: 130px;
  object-fit: cover;
}

.game-info {
  padding: 10px;
}

.game-info h3 {
  font-size: 14px;
  margin-bottom: 6px;
}

.rating {
  font-size: 12px;
  color: gold;
  margin-bottom: 6px;
}

.play-btn {
  width: 100%;
  padding: 8px;
  border: none;
  border-radius: 8px;
  background: #1db954;
  font-weight: 600;
  cursor: pointer;
}

/* MODAL */
.game-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 100;
}

.game-modal iframe {
  width: 80%;
  height: 80%;
  border-radius: 14px;
  border: none;
}

.close, .fullscreen {
  position: absolute;
  top: 20px;
  font-size: 24px;
  cursor: pointer;
}

.close { right: 30px; }
.fullscreen { right: 70px; }

.loader {
  text-align: center;
  padding: 30px;
  opacity: 0.6;
}
#searchSection {
  padding-top: 10px;
}
#recentSection {
  margin-top: 80px;
  border: 1px solid #222;
}
.footer {
  background: #0b0b0b;
  padding: 50px 6%;
  color: #ccc;
  margin-top: 60px;
}

.footer-content {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
}
.footer i{
  color: limegreen;
}
.footer-logo {
  font-size: 45px;
  font-weight: 700;
  color: white;
  margin-bottom: 10px;
}

.footer-brand p {
  line-height: 1.6;
  margin-bottom: 15px;
}

.footer-social a {
  margin-right: 12px;
  color: white;
  font-size: 18px;
  transition: 0.3s;
}
.footer-social a:hover {
  color: #1db954;
}

.footer-section {
  min-width: 150px;
  margin-top: 70px;
}

.footer-section h3 {
  color: white;
  margin-bottom: 12px;
  font-size: 18px;
}

.footer-section a {
  display: block;
  color: #ccc;
  text-decoration: none;
  margin-bottom: 8px;
  transition: 0.3s;
}
.footer-section a:hover {
  color: #1db954;
}

.footer-copy {
  text-align: center;
  margin-top: 30px;
  margin-bottom: 0;
  color: #777;
  font-size: 14px;
  border-top: 1px solid rgba(255,255,255,0.1);
  padding-top: 20px;
}
.profile-container {
  position: relative;
  margin-left: 15px;
  cursor: pointer;
}

#profileImg {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #1db954;
  background: #222;
}

/* Dropdown */
.profile-menu {
  position: absolute;
  top: 50px;
  right: 0;
  background: #111;
  border-radius: 6px;
  display: none;
  min-width: 140px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.6);
  z-index: 9999;
}

.profile-menu a,
.profile-menu button {
  display: block;
  width: 100%;
  padding: 10px 12px;
  background: none;
  border: none;
  color: white;
  text-align: left;
  cursor: pointer;
  font-size: 14px;
}

.profile-menu a:hover,
.profile-menu button:hover {
  background: #1db954;
  color: black;
}
/* ================= RESPONSIVE ================= */

/* Hide hamburger on desktop */
.menu-toggle {
  display: none;
  font-size: 24px;
  color: white;
  cursor: pointer;
}

/* ---------- Tablets & Mobiles ---------- */
@media (max-width: 1024px) {

  header {
    padding: 12px 4%;
  }

  .search-box {
    margin-left: 0;
  }

  nav.navbar {
    gap: 6px;
    margin-left: 0;
  }
}

/* ---------- Mobile ---------- */
@media (max-width: 768px) {

  body {
    padding-top: 60px;
  }

  /* HEADER */
  .menu-toggle {
    display: block;
  }

  .nav-links {
    position: absolute;
    top: 65px;
    left: 0;
    right: 0;
    background: black;
    flex-direction: column;
    display: none;
    padding: 15px 0;
    z-index: 999;
  }
 .nav-links.show {
    display: flex;
  }

  nav-links a {
    width: 100%;
    text-align: center;
    padding: 12px;
  }

  .search-box {
    width: 100%;
    margin: 10px 0;
  }

  #searchInput {
    width: 100%;
  }

  /* HERO */
  .hero {
    height: auto;
    padding: 120px 20px 40px;
  }

  .hero-title {
    font-size: 36px;
  }

  .hero-desc {
    font-size: 16px;
  }

  .hero-lang,
  .hero-rank {
    font-size: 14px;
  }

  .nav-arrow {
    display: none;
  }

  /* SLIDERS */
  .slider-section {
    padding: 20px 15px;
  }

  .movie-card {
    width: 160px;
    height: 240px;
  }

  .slider-arrow {
    display: none;
  }

  /* MODAL */
  #movieModal img.poster {
    float: none;
    width: 100%;
    margin-bottom: 15px;
  }

  #movieModal h1 {
    font-size: 26px;
  }

  #movieModal iframe {
    height: 220px;
  }

  /* FOOTER */
  .footer-content {
    flex-direction: column;
    text-align: center;
  }

  .footer-section {
    margin-top: 30px;
  }
}
</style>
</head>

<body>

<!-- NAVBAR -->
 <header>
<nav class="navbar">
  <a class="logo" href="index.html"> <i class="fas fa-infinity"></i> ChillBox</a>
  <div class="nav-links">
    <a href="index.html">Movies</a>
     <a href="Music.Html">Music</a>
    <a class="active" href="Games.html">Games</a>
    <a href="AboutUs.html">About</a>
    <a href="FeedBack.html">FeedBack</a>
  </div>
  <input type="text" id="search" placeholder="Search games...">
  <div class="menu-toggle" id="menuToggle">
  <i class="fas fa-bars"></i>
</div>
 <a href="profile.html" class="profile-container">
  <img id="profileImg" src="default-avatar.png" alt="Profile">
</a>
</div>
</nav>
</header>
<!-- SEARCH RESULTS -->
<section id="searchSection" class="hidden">
  <h2>Search Results</h2>
  <div class="games-container" id="searchResults"></div>
</section>

<!-- RECENTLY PLAYED -->
<section id="recentSection" class="hidden">
  <h2>Recently Played</h2>
  <div class="slider">
    <button class="arrow left" onclick="slide('recentGames', -1)">‚Äπ</button>
    <div class="games-row" id="recentGames"></div>
    <button class="arrow right" onclick="slide('recentGames', 1)">‚Ä∫</button>
  </div>
</section>

<!-- CATEGORY SECTIONS -->
<section>
  <h2>Action Games</h2>
  <div class="slider">
    <button class="arrow left" onclick="slide('actionGames', -1)">‚Äπ</button>
    <div class="games-row" id="actionGames"></div>
    <button class="arrow right" onclick="slide('actionGames', 1)">‚Ä∫</button>
  </div>
</section>

<section>
  <h2>Racing Games</h2>
  <div class="slider">
    <button class="arrow left" onclick="slide('racingGames', -1)">‚Äπ</button>
    <div class="games-row" id="racingGames"></div>
    <button class="arrow right" onclick="slide('racingGames', 1)">‚Ä∫</button>
  </div>
</section>

<section>
  <h2>Puzzle Games</h2>
  <div class="slider">
    <button class="arrow left" onclick="slide('puzzleGames', -1)">‚Äπ</button>
    <div class="games-row" id="puzzleGames"></div>
    <button class="arrow right" onclick="slide('puzzleGames', 1)">‚Ä∫</button>
  </div>
</section>

<section>
  <h2>Sports Games</h2>
  <div class="slider">
    <button class="arrow left" onclick="slide('sportsGames', -1)">‚Äπ</button>
    <div class="games-row" id="sportsGames"></div>
    <button class="arrow right" onclick="slide('sportsGames', 1)">‚Ä∫</button>
  </div>
</section>

<!-- ALL GAMES -->
<h2 style="padding-left:40px;">All Games</h2>
<div class="games-container" id="games"></div>
<div class="loader" id="loader">Loading more games...</div>

<!-- GAME MODAL -->
<div class="game-modal" id="gameModal">
  <span class="close" onclick="closeGame()">‚úñ</span>
  <button class="fullscreen" onclick="fullscreen()">‚õ∂</button>
  <iframe id="gameFrame"></iframe>
</div>
<footer class="footer">
  <div class="footer-content">

    <div class="footer-brand">
      <h2 class="footer-logo"><i class="fas fa-infinity"></i> ChillBox</h2>
      <p>Stream Movies, play<br>Games, and enjoy<br>Music ‚Äì all in one place.</p>

      <div class="footer-social">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
      </div>
    </div>

    <div class="footer-section">
      <h3>Sections</h3>
      <a href="index.html">Movies</a>
      <a href="Music.Html">Music</a>
      <a href="Games.html">Games</a>
      <a href="AboutUs.html">About Us</a>
    </div>

    <div class="footer-section">
      <h3>Support</h3>
      <a href="#">FAQ</a>
      <a href="#">Privacy Policy</a>
      <a href="#">Terms & Conditions</a>
    </div>

  </div>

  <p class="footer-copy">¬© 2025 ChillBox Entertainment. All rights reserved.</p>
</footer>
<script>
const API = "https://rss.gamemonetize.com/rssfeed.php?format=json&amount=150";
let allGames = [];
let visible = 24;

fetch(API)
  .then(res => res.json())
  .then(data => {
    allGames = data.map(g => ({
      ...g,
      rating: (Math.random() * 1.5 + 3.5).toFixed(1)
    }));
    loadRecent();
    loadCategoryRows();
    renderAll();
  });

function stars(r) {
  return "‚òÖ".repeat(Math.floor(r)) + "‚òÜ".repeat(5 - Math.floor(r)) + ` (${r})`;
}

function gameCard(game) {
  return `
    <div class="game-card">
      <img loading="lazy" src="${game.thumb}">
      <div class="game-info">
        <h3>${game.title}</h3>
        <div class="rating">${stars(game.rating)}</div>
        <button class="play-btn" onclick="play('${game.url}','${game.title}')">Play Now</button>
      </div>
    </div>`;
}

function loadCategoryRows() {
  renderRow("Action", "actionGames");
  renderRow("Racing", "racingGames");
  renderRow("Puzzle", "puzzleGames");
  renderRow("Sports", "sportsGames");
}

function renderRow(cat, id) {
  document.getElementById(id).innerHTML =
    allGames.filter(g => g.category?.includes(cat)).slice(0, 12).map(gameCard).join("");
}

function renderAll() {
  document.getElementById("games").innerHTML =
    allGames.slice(0, visible).map(gameCard).join("");
}

window.addEventListener("scroll", () => {
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 300) {
    visible += 12;
    renderAll();
  }
});

function slide(id, dir) {
  document.getElementById(id).scrollBy({
    left: dir * 400,
    behavior: "smooth"
  });
}

const searchInput = document.getElementById("search");
const searchSection = document.getElementById("searchSection");
const searchResults = document.getElementById("searchResults");

searchInput.addEventListener("input", () => {
  const query = searchInput.value.trim().toLowerCase();

  if (query === "") {
    // Restore normal layout
    searchSection.classList.add("hidden");
    document.querySelectorAll("section").forEach(sec => {
      if (sec.id !== "searchSection") sec.style.display = "block";
    });
    document.getElementById("games").style.display = "grid";
    return;
  }

  // Hide other sections
  document.querySelectorAll("section").forEach(sec => {
    if (sec.id !== "searchSection") sec.style.display = "none";
  });
  document.getElementById("games").style.display = "none";

  // Show search results
  searchSection.classList.remove("hidden");

  const results = allGames.filter(game =>
    game.title.toLowerCase().includes(query)
  );

  searchResults.innerHTML = results.length
    ? results.map(gameCard).join("")
    : `<p style="opacity:.6">No games found</p>`;
});

/* PLAY */
function play(url, title) {
  document.getElementById("gameModal").style.display = "flex";
  document.getElementById("gameFrame").src = url;

  const gameData = { title, url };

  // local storage (already works)
  saveRecent(gameData);

  // üî• Firestore save
  if (window.saveGameHistory) {
    saveGameHistory(gameData);
  }
}
function closeGame() {
  document.getElementById("gameModal").style.display = "none";
  document.getElementById("gameFrame").src = "";
}

function fullscreen() {
  document.getElementById("gameFrame").requestFullscreen();
}

/* RECENT */
function saveRecent(game) {
  let recent = JSON.parse(localStorage.getItem("recent")) || [];
  recent = recent.filter(g => g.title !== game.title);
  recent.unshift(game);
  if (recent.length > 5) recent.pop();
  localStorage.setItem("recent", JSON.stringify(recent));
  loadRecent();
}

function loadRecent() {
  const recent = JSON.parse(localStorage.getItem("recent"));
  if (!recent || !recent.length) return;
  document.getElementById("recentSection").classList.remove("hidden");
  document.getElementById("recentGames").innerHTML =
    recent.map(g =>
      `<div class="game-card">
        <div class="game-info">
          <h3>${g.title}</h3>
          <button class="play-btn" onclick="play('${g.url}','${g.title}')">Continue</button>
        </div>
      </div>`
    ).join("");
}

document.addEventListener("keydown", e => {
  if (e.key === "Escape") closeGame();
});
</script>
<script type="module">
import { auth } from "./firebase.js";
import { onAuthStateChanged, signOut } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

onAuthStateChanged(auth,(user)=>{
  if(!user){
    location.href="login.html";
  }else{
    document.getElementById("profileMenu").innerHTML =
      `üë§ ${user.email} 
       <button onclick="logout()">Logout</button>`;
  }
});

window.logout = function(){
  signOut(auth).then(()=>location.href="login.html");
}
</script>
   <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-app.js";
      import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCG7awgsnkNtyOoqN7aRsRyAP4hNxZsvdo",
        authDomain: "AIzaSyCG7awgsnkNtyOoqN7aRsRyAP4hNxZsvdo",
        projectId: "chillbox-747f8",
        storageBucket: "chillbox-747f8.firebasestorage.app",
        messagingSenderId: "808846502692",
        appId: "1:808846502692:web:fd3a70a823506207f261b1"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      async function showGames() {
        const gamesCol = collection(db, "games");
        const gamesSnapshot = await getDocs(gamesCol);
        const games = gamesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

        const container = document.getElementById("games");
        container.innerHTML = "";
        games.forEach(game => {
          const div = document.createElement("div");
          div.innerHTML = `<h3>${game.title}</h3><button onclick="playGame('${game.id}')">Play</button>`;
          container.appendChild(div);
        });
      }

      async function playGame(gameId) {
        try {
          await addDoc(collection(db, "user_activity"), {
            userId: "user123", // Replace with dynamic user ID
            contentType: "game",
            contentId: gameId,
            datePlayed: new Date().toISOString()
          });
          alert("Game played and activity recorded!");
        } catch (e) {
          console.error("Error recording activity: ", e);
        }
      }

      showGames();
   </script>
  <button onclick="logActivity('game','Snake Game')">Play</button>

<script type="module">
import { auth, db } from "./firebase.js";
import { addDoc, collection } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

window.logActivity = async function(type, title){
  const user = auth.currentUser;
  if (!user) return;

  await addDoc(
    collection(db, "users", user.uid, "activity"),
    {
      type,
      title,
      time: new Date()
    }
  );
};
</script>
  <script type="module">
import { auth, db } from "./firebase.js";
import { addDoc, collection } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

window.logActivity = async function(category, title) {
  const user = auth.currentUser;
  if (!user) return;

  await addDoc(
    collection(db, "users", user.uid, "activity"),
    {
      category,
      title,
      time: new Date()
    }
  );
};
</script>
<script type="module">
import { auth } from "./firebase.js";
import { onAuthStateChanged } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

onAuthStateChanged(auth, (user) => {
  if (!user) {
    location.replace("login.html");
  }
});
function logout() {
  auth.signOut().then(() => {
    location.replace("login.html");
  });
}
</script>
import { auth } from "./firebase.js";
import { onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const profileImg = document.getElementById("profileImg");
const profileMenu = document.getElementById("profileMenu");

onAuthStateChanged(auth, user => {
  if (!user) {
    location.href = "login.html";
  } else {
    profileMenu.innerHTML = `
      <p style="padding:10px">${user.email}</p>
      <a href="profile.html">Profile</a>
      <button onclick="logout()">Logout</button>
    `;
  }
});

profileImg.addEventListener("click", () => {
  profileMenu.style.display =
    profileMenu.style.display === "block" ? "none" : "block";
});

window.logout = function () {
  signOut(auth).then(() => location.href="login.html");
};

document.addEventListener("click", e => {
  if (!e.target.closest(".profile-container")) {
    profileMenu.style.display = "none";
  }
});
<script type="module">
import { auth } from "./firebase.js";
import { signOut } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

window.logout = function () {
  signOut(auth).then(() => {
    window.location.replace("login.html");
  });
};
</script>
  <script>
const menuToggle = document.getElementById("menuToggle");
const navlinks = document.querySelector("nav.links");

menuToggle.addEventListener("click", () => {
  navbar.classList.toggle("show");
});
</script>
  
  <script type="module">
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { auth } from "./firebase.js";

onAuthStateChanged(auth, (user) => {
  if (user) {
    console.log("‚úÖ Logged in as:", user.email);
  } else {
    console.warn("‚ùå User NOT logged in");
  }
});
import { auth } from "./firebase.js";
import { getFirestore, collection, addDoc, serverTimestamp } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const db = getFirestore();

/**
 * Save game play history (email-based)
 */
window.saveGameHistory = async function (game) {
  const user = auth.currentUser;
  if (!user || !user.email) {
    console.warn("User not logged in. Game not saved.");
    return;
  }

  try {
    await addDoc(collection(db, "gameHistory"), {
      email: user.email,
      title: game.title,
      url: game.url,
      playedAt: serverTimestamp()
    });

    console.log("üéÆ Game history saved:", game.title);
  } catch (err) {
    console.error("‚ùå Game history error:", err);
  }
};
</script>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, collection, addDoc, serverTimestamp } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCG7awgsnkNtyOoqN7aRsRyAP4hNxZsvdo",
    authDomain: "chillbox-747f8.firebaseapp.com",
    projectId: "chillbox-747f8",
    storageBucket: "chillbox-747f8.firebasestorage.app",
    messagingSenderId: "808846502692",
    appId: "1:808846502692:web:fd3a70a823506207f261b1"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // üîê Auth check
  onAuthStateChanged(auth, (user) => {
    if (user) {
      console.log("‚úÖ Logged in:", user.email);
    } else {
      console.warn("‚ùå User not logged in");
    }
  });

  // üéÆ SAVE GAME HISTORY
  window.saveGameHistory = async function (game) {
    const user = auth.currentUser;
    if (!user || !user.email) return;

    try {
      await addDoc(collection(db, "gameHistory"), {
        email: user.email,
        title: game.title,
        url: game.url,
        createdAt: serverTimestamp()
      });

      console.log("üéÆ Game saved:", game.title);
    } catch (err) {
      console.error("üî• Firestore error:", err);
    }
  };
</script>
</body>
</html>

































