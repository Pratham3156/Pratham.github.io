<!DOCTYPE html>
<html>
<head>
  <link rel="icon" type="image/png" href="logo.png">
  <title>Signup</title>

  <style>
    body{
      margin:0;
      height:100vh;
      position:relative;
      background-image: url("bg (1).jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: saturate(1.2) contrast(1.1);
      font-family: Arial;
    }

    .overlay{
      position:absolute;
      inset:0;
      background: rgba(0,0,0,0.35);
    }

    .page-center{
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      position:relative;
      z-index:1;
    }

    .auth-box{
      background: rgba(20,20,20,0.85);
      padding:30px;
      width:320px;
      border-radius:14px;
      box-shadow:
        0 0 40px rgba(0,0,0,0.8),
        0 0 25px rgba(29,185,84,0.25);
      backdrop-filter: blur(6px);
      animation: slideFade 0.6s ease;
    }

    @keyframes slideFade{
      from{ opacity:0; transform:translateY(30px); }
      to{ opacity:1; transform:translateY(0); }
    }

    h2,p{ color:white; text-align:center; }

    input{
      width:100%;
      padding:12px;
      margin:10px 0;
      border-radius:6px;
      border:none;
      outline:none;
    }

    button{
      width:100%;
      padding:12px;
      margin-top:10px;
      background:#1db954;
      border:none;
      border-radius:6px;
      font-weight:bold;
      cursor:pointer;
    }

    .google-btn{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      background:white;
      color:black;
    }

    .google-btn img{ width:18px; }

    .divider{
      margin:15px 0;
      color:#aaa;
      text-align:center;
    }

    a{ color:#1db954; }

    .password-wrap{
      position:relative;
    }

    .toggle-pass{
      position:absolute;
      right:10px;
      top:50%;
      transform:translateY(-50%);
      font-size:12px;
      color:#1db954;
      cursor:pointer;
    }

    #errorBox{
      display:none;
      background:#ff3b3b20;
      color:#ff6b6b;
      padding:10px;
      border-radius:6px;
      margin-bottom:10px;
      font-size:13px;
      text-align:center;
    }
  </style>
</head>

<body>

<div class="overlay"></div>

<div class="page-center">
  <div class="auth-box">

    <div id="errorBox"></div>

    <h2>Signup</h2>

    <input id="email" type="email" placeholder="Email">

    <div class="password-wrap">
      <input id="password" type="password" placeholder="Password">
      <span class="toggle-pass" onclick="togglePassword()">Show</span>
    </div>

    <button id="signupBtn" onclick="emailSignup()">Signup</button>

    <div class="divider">OR</div>

    <button class="google-btn" onclick="googleSignup()">
      <img src="https://developers.google.com/identity/images/g-logo.png">
      Continue with Google
    </button>

    <p>
      Already have an account?
      <a href="login.html">Login</a>
    </p>

  </div>
</div>

<script type="module">
import { auth } from "./firebase.js";
import {
  createUserWithEmailAndPassword,
  GoogleAuthProvider,
  signInWithPopup
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const provider = new GoogleAuthProvider();

const email = document.getElementById("email");
const password = document.getElementById("password");
const errorBox = document.getElementById("errorBox");
const signupBtn = document.getElementById("signupBtn");

function showError(msg){
  errorBox.innerText = msg;
  errorBox.style.display = "block";
}

window.emailSignup = () => {
  errorBox.style.display = "none";
  signupBtn.disabled = true;
  signupBtn.innerText = "Creating account...";

  createUserWithEmailAndPassword(auth, email.value, password.value)
    .then(() => location.replace("index.html"))
    .catch(err => {
      if (err.code === "auth/invalid-email") {
        showError("Please enter a valid email.");
      } else if (err.code === "auth/weak-password") {
        showError("Password must be at least 6 characters.");
      } else if (err.code === "auth/email-already-in-use") {
        showError("Email already exists.");
      } else {
        showError(err.message);
      }
      signupBtn.disabled = false;
      signupBtn.innerText = "Signup";
    });
};

window.googleSignup = () => {
  signInWithPopup(auth, provider)
    .then(() => location.replace("index.html"))
    .catch(err => showError(err.message));
};

window.togglePassword = () => {
  password.type = password.type === "password" ? "text" : "password";
};
</script>

</body>
</html>
